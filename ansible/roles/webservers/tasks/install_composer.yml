---

- name: check if Composer installed
  stat: path=composer-setup.php
  register: composer_status

- name: download Composer
  shell: php -r "copy('https://getcomposer.org/installer', 'composer-setup.php');"
  when: not composer_status.stat.exists

- name: install Composer
  shell: php composer-setup.php
  when: not composer_status.stat.exists

- name: make Composer executable globally
  shell: mv composer.phar /usr/local/bin/composer
  when: not composer_status.stat.exists
