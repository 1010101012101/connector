<?xml version="1.0"?>
<ruleset name="adeira/code-quality">
	<!--
		SEE:
		- https://github.com/juzna/nette-coding-standard/blob/master/NetteStandard/ruleset.xml
		- https://gist.github.com/jakubkulhan/b054b89cb207822fcb71
		- https://github.com/consistence/coding-standard
		- https://github.com/slevomat/coding-standard
	-->

	<description>Source of code quality rules for Adeira packages</description>
	<exclude-pattern>*/vendor/*</exclude-pattern>

	<!-- /vendor/adeira/code-quality -->
	<rule ref="./vendor/consistence/coding-standard/Consistence/ruleset.xml">
		<exclude name="Generic.PHP.LowerCaseConstant"/>
		<exclude name="Generic.Formatting.SpaceAfterCast"/>
		<exclude name="Generic.Functions.OpeningFunctionBraceBsdAllman.BraceOnSameLine"/> <!-- better implementation already in: Squiz.Functions.MultiLineFunctionDeclaration.BraceOnSameLine -->
		<exclude name="Squiz.Commenting.FunctionComment.MissingParamTag"/>
		<exclude name="Squiz.Commenting.FunctionComment.WrongStyle"/>
		<exclude name="Squiz.PHP.Heredoc.NotAllowed"/>
		<exclude name="Squiz.Strings.DoubleQuoteUsage.ContainsVar"/>
		<exclude name="Squiz.WhiteSpace.OperatorSpacing.NoSpaceAfter"/>
		<exclude name="Squiz.WhiteSpace.OperatorSpacing.NoSpaceBefore"/>
	</rule>

	<rule ref="./vendor/slevomat/coding-standard/SlevomatCodingStandard/ruleset.xml">
		<exclude name="SlevomatCodingStandard.Files.TypeNameMatchesFileName"/>
		<exclude name="SlevomatCodingStandard.Namespaces.FullyQualifiedClassNameAfterKeyword"/>
		<exclude name="SlevomatCodingStandard.Namespaces.ReferenceUsedNamesOnly"/>
		<exclude name="SlevomatCodingStandard.Namespaces.UseOnlyWhitelistedNamespaces"/>
		<exclude name="PSR2.Namespaces.UseDeclaration.MultipleDeclarations"/> <!-- allow PHP 7 group use declaration -->
		<exclude name="SlevomatCodingStandard.Namespaces.MultipleUsesPerLine"/> <!-- allow PHP 7 group use declaration -->
		<exclude name="SlevomatCodingStandard.Namespaces.UnusedUses.UnusedUse"/> <!-- doesn't work correctly (PHP 7) -->
		<exclude name="SlevomatCodingStandard.Namespaces.DisallowGroupUse"/>
		<exclude name="SlevomatCodingStandard.Typehints.TypeHintDeclaration.missingParameterTypeHint"/> <!-- doesn't work correctly (PHP 7) -->
		<exclude name="SlevomatCodingStandard.Typehints.TypeHintDeclaration.missingReturnTypeHint"/> <!-- doesn't work correctly (PHP 7) -->
	</rule>

	<!--<rule ref="SlevomatCodingStandard.Namespaces.UseOnlyWhitelistedNamespaces">-->
		<!--<properties>-->
			<!--<property name="allowUseFromRootNamespace" value="true"/>-->
			<!--<property name="namespacesRequiredToUse" type="array" value="Adeira"/>-->
		<!--</properties>-->
	<!--</rule>-->

	<rule ref="PSR1.Files.SideEffects.FoundWithSymbols">
		<exclude-pattern>*.phpt</exclude-pattern>
	</rule>

	<rule ref="SlevomatCodingStandard.Classes.UnusedPrivateElements">
		<properties>
			<property name="alwaysUsedPropertiesAnnotations" type="array" value="@ORM\Column,@ORM\Embedded,@ORM\JoinColumn,@ORM\ManyToMany"/>
		</properties>
	</rule>

	<rule ref="SlevomatCodingStandard.Namespaces.UnusedUses">
		<properties>
			<property name="searchAnnotations" value="true"/>
		</properties>
	</rule>

	<rule ref="Generic.PHP.UpperCaseConstant"/>

</ruleset>
