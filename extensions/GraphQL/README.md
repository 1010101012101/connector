### Register extension

    extensions:
        graphql: Adeira\Connector\GraphQL\Infrastructure\DI\Nette\Extension

Defining GraphQL schema is always two step process with this extension. First define schema in configutation file. This is how the schema should look like at the output. Next write resolvers if needed in PHP. Bellow this text you'll find pretty extensive examples of how to use it.

### Define queries

```yaml
graphql:
    queries:
        allWeatherStations:
            arguments:
                first: Int
                after: String
            resolver: Adeira\Connector\Devices\Infrastructure\Delivery\API\NewGraphQL\AllWeatherStationsQuery
            next: WeatherStationsConnection
```

Resolver example:

```php
final class AllWeatherStationsQuery
{

    public function __construct(ViewAllWeatherStations $allWeatherStationsService)
    {
        $this->allWeatherStationsService = $allWeatherStationsService;
    }

    public function __invoke($ancestorValue, $args, \Adeira\Connector\GraphQL\Context $context)
    {
        $limit = $args['first'] ?? NULL;
        $fromWeatherStationId = isset($args['after']) ? WeatherStationId::createFromString(base64_decode($args['after'])) : NULL;
        return $this->allWeatherStationsService->execute($context->userId(), $limit, $fromWeatherStationId);
    }

}
```

### Define mutations

```yaml
graphql:
    mutations:
        createWeatherStation:
            arguments:
                name: String!
            resolver: Adeira\Connector\Devices\Infrastructure\Delivery\API\NewGraphQL\CreateWeatherStation
            next: WeatherStation
```

### Define output types

```yaml
graphql:
    outputTypes:
        WeatherStationsConnection:
            resolver: Adeira\Connector\Devices\Infrastructure\Delivery\API\NewGraphQL\WeatherStationsConnection
            fields:
                edges: [WeatherStationEdge]
                totalCount: Int!
                weatherStations: [WeatherStation]
                series: [WeatherStationSeries]
```

Resolver should be defined as class with public resolve methods named in same manner are fields:

```php
final class WeatherStationsConnection
{

    public function __construct(CountAllWeatherStations $countAllWeatherStations)
    {
        $this->countAllWeatherStations = $countAllWeatherStations;
    }

    /**
     * @param WeatherStation[] $ws
     * @return WeatherStation[]
     */
    public function edges(array $ws, array $args, Context $context): array
    {
        return $ws; // fall through
    }

    /**
     * @param WeatherStation[] $ws
     * @return int
     */
    public function totalCount(array $ws, array $args, Context $context): int
    {
        return $this->countAllWeatherStations->execute($context->userId());
    }

    //...

}
```

### Define input types
Input types doesn't have resolvers. They are defined only in config file and autogenerated for you.

```yaml
graphql:
    inputTypes:
        PhysicalQuantitiesInput:
            absolutePressure: Float
            relativePressure: Float
            pressureUnit: PressureUnit(default: PASCAL) # this is enum
            indoorTemperature: Float
            outdoorTemperature: Float
            temperatureUnit: TemperatureUnit(default: CELSIUS)
            indoorHumidity: Float
            outdoorHumidity: Float
            humidityUnit: HumidityUnit(default: PERCENTAGE)
            windSpeed: Float
            windAzimuth: Float
            windGust: Float
            windSpeedUnit: WindSpeedUnit(default: KMH)
```

### Define enums

```yaml
graphql:
    enums:
        PressureUnit:
            ATM: Adeira\Connector\PhysicalUnits\DomainModel\Pressure\Units\Atm
            BAR: Adeira\Connector\PhysicalUnits\DomainModel\Pressure\Units\Bar
            PASCAL: Adeira\Connector\PhysicalUnits\DomainModel\Pressure\Units\Pascal
            TORR: Adeira\Connector\PhysicalUnits\DomainModel\Pressure\Units\Torr
```
